# 9.4 MPLS 的封装（P193 4.9.2）

在将数据报封装为以太网 MAC 帧前，MPLS 会在 IP 数据报前面插入 MPLS 首部，即：

| 以太网帧首部 | **MPLS 帧首部** | IP 首部 | IP 数据部分 | 以太网帧尾部 |
|--------|--------------|-------|---------|--------|

MPLS 首部格式如下：

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                Label Value              | EXP |S|     TTL     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

其中：

+ **标签指（Label Value）**：占 20 位。
+ **实验（EXP）**：目前保留用于实验。
+ **栈（S）**：占 1 位，当 S 置为 1 时，表示包含栈标签。
+ **生存时间（TTL）**：占 8 位，用于防止 MPLS 分组在 MPLS 域中兜圈子。
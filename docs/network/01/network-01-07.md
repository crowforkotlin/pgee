# 1.7 计算机网络的主要性能指标（P21 1.6）

## 1.7.1 带宽（P21 1.6.1）

在计算机网络中，**带宽（Bandwidth）** 表示某**通道**传送数据的能力，即某信道能通过的 **“最高数据率”**。

带宽的单位为 **bit/s**，即 **“比特每秒”**。

带宽常见的两种表示方式：

+ $bps$：即比特每秒，其他不同单位：$Kbps$、$Mbps$、$Gbps$ 等。
+ $B/s$：即字节每秒，其他不同的单位：$KB/s$、$MB/s$、$GB/s$ 等。

由于 $1\ \text{字节}=8\ \text{比特}$，即 $1\ byte=8\ bit$，因此 $1\ B/s=8\ bps$，其他不同单位：$1\ MB/s=8\ Mbps$。

另外：

+ $1 KB=1000 B$，$1MB=1000 KB$，$1GB=1000 MB$ ...
+ $1 KiB=1024 B$，$1MiB=1024 KiB$，$1GB=1024 MiB$ ...

## 1.7.2 时延（P22 1.6.1）

**时延（Delay）** 是指数据（一个报文或分组，甚至是比特）从网络（或链路）的一段送达另一端所需要的时间，又称**延迟**或**迟延**。

时延由四个部分组成：

+ **发送时延（Transmission Delay）**

  （P22 1.6.1）发送时延是指**主机或路由器发送数据真所需要的时间**，又称**传输时延**，其计算公式为：
  $$
  \text{发送时延}=\frac{\text{数据帧长度}(bit)}{\text{发送速率}(bit/s)}
  $$


（P24 1.6.1）对于**高速网络链路**，我们提高的仅仅是发送速率，而不是传播速率，因此**降低的只有发送时延**。

+ **传播时延（Propagation Delay）**

  （P22 1.6.1）传播时延是指**电磁波在信道中传播一定距离需要花费的时间**，其计算公式为：
  $$
  \text{传播时延}=\frac{\text{信道长度}(m)}{\text{电磁波在信道上的传播速率}(m/s)}
  $$
  电磁波在自由空间中的传输速率是光速，即 $3.0\times 10^5km/s$，但其在网络传输媒体中的速率略低些：

    + 铜线电缆：$2.3\times 10^5km/s$
    + 光纤：$2.0\times 10^5km/s$

+ **处理时延（Processing Delay）**

  （P23 1.6.1）处理时延是指**主机或路由器在收到分组后进行处理所花费的时间**，例如分析分组首部、从分组中提取数据部分、进行差错校验、查找转发表等。

+ **排队时延（Queuing Delay）**

  （P23 1.6.1）排队时延是指**路由器确定了转发接口后，在输出队列中排队等待的时间**。当网络通信量很大的时候会发生队列溢出，使分组丢失，这相当于排队时延为无穷大。

于是，数据在网络中所经历的总时延公式如下：
$$
\text{总时延}=\text{发送时延}+\text{传播时延}+\text{处理时延}+\text{排队时延}
$$
端到端时延可认为是：
$$
\text{端到端时延}=\text{传播时延}+\text{处理时延}+\text{排队时延}
$$

## 1.7.3 时延带宽积（P24 1.6.1）

**时延带宽积（Bandwidth-Delay Product）**指**传播时延**和**带宽**的乘积，即：
$$
\text{时延带宽积}=\text{传播时延} \times \text{带宽}
$$
时延带宽积又称**以比特为单位的链路长度**，表示当前链路所能容纳的最大比特数，即从发送端发出但尚未到达接收端的比特数。

_（[RFC-1072 1](https://datatracker.ietf.org/doc/html/rfc1072#section-1)）注：RFC 文档将时延带宽积定义为 $\text{RTT} \times \text{带宽}$，此处以教材为准。_

## 1.7.4 往返时间（P25 1.6.1）

**往返时间 RTT（Round-Trip Time）** 又称**往返时延（Round-Trip Time delay）**，是指**发送包发送数据包到达接收方，并且接收方发回确认信息（或应答）到发送方所需的总时间**。

理想情况下 RTT 可约为：
$$
\text{RTT}=\text{发送时延（发送端发送数据）}+\text{发送时延（接收端发送应答）}+2\times\text{传播时延}+2\times\text{处理时延}+2\times\text{排队时延}
$$
其中“发送时延（接收端发送应答）”可忽略不计。

## 1.7.6 其他性能指标

+ 有效数据率：指除去协议头、超时重传等无效数据之后的数据传输速率。这也是千兆网络接口测速只有约 940Mbps 的原因。

## 1.7.7 非性能特征（P26 1.6.2）

+ 费用
+ 质量
+ 标准化
+ 可靠性
+ 可扩展性和可升级性
+ 易于管理和维护
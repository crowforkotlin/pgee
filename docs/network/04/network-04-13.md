# 4.13 转交地址的分类

## 4.13.1 移动 IP（P436 9.4.1）

移动 IP 解决了当用户使用移动设备在不同网络之间漫游时，连接可能会因为 IP 的变动而断开，而导致影响网络应用体验的问题。

移动 IP 在实践中是个非常庞大的概念，本节仅讨论移动设备**从一地接入网络后漫游到另一地**的情况。

相关词条：

+ **移动站**：通常指用户所使用的移动设备。
+ **归属网络（Home Network）**：即移动设备接入移动互联网时所在的网络。
+ **归属代理（Home Agent）**：通常是归属网络的路由器。
+ **归属地址（Home Address）**：又称**永久地址**，即移动设备在归属网络中所持有的原始地址，无论移动设备在什么地理位置接入移动互联网，其归属地址都不变。
+ **外地网络（Foreign Network）**：即移动设备在接入移动互联网，并漫游之后接入的新的网络。
+ **外地代理（Foreign Agent）**：通常是外地网络的路由器。
+ **转交地址（Care-of Address）**：即移动设备在新的网络所获取到的新的临时地址。

当移动设备在**归属网络**中发送了请求，还未收到响应就漫游到了**外地地址**，此时：

1. 移动设备从**外地代理**获取到新的地址，即**转交地址**。
2. 移动设备向**归属代理**注册自己的**转交地址**，即告知**归属网络**，移动设备已漫游到了**外地网络**。
3. **归属代理**收到了响应，但发现移动设备已漫游到了**外地网络**，于是将数据报转发给了**外地代理**，目的地址为**转交地址**。
4. **外地代理**将响应转发给移动设备。

而移动设备在漫游到外地网络后，新发的请求都**使用新的地址**，即转交地址，而**不再使用归属地址**。

## 4.13.2 转交地址的分类

+ **外地代理转交地址**

  当移动站进入外地网络时，通过外部代理获取到的转交地址称为**外地代理转交地址**。
+ （P437 9.4.1）**同址转交地址（Co-located Care-of Address）**

  又称**协同定位转交地址**。当移动站充当外地代理，即移动站和外地代理是同一个设备时，此时移动站的转交地址称为**同址转交地址**。